"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var _react=require("react"),_isEqual=_interopRequireDefault(require("lodash/isEqual")),_popper=_interopRequireDefault(require("popper.js"));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(b,!0).forEach(function(c){_defineProperty(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(b).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function _slicedToArray(a,b){return _arrayWithHoles(a)||_iterableToArrayLimit(a,b)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(a,b){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a)){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!(b&&c.length===b));d=!0);}catch(a){e=!0,f=a}finally{try{d||null==h["return"]||h["return"]()}finally{if(e)throw f}}return c}}function _arrayWithHoles(a){if(Array.isArray(a))return a}var useDiffedState=function(a){var b=(0,_react.useState)(a),c=_slicedToArray(b,2),d=c[0],e=c[1];return[d,function setValue(a){var b=a instanceof Function?a(d):a;e(function(a){return(0,_isEqual["default"])(a,b)?a:b})}]},initialMod={},usePopperState=function(a){var b=useDiffedState({position:"absolute",top:0,left:0,opacity:0,pointerEvents:"none"}),c=_slicedToArray(b,2),d=c[0],e=c[1],f=useDiffedState({}),g=_slicedToArray(f,2),h=g[0],i=g[1],j=(0,_react.useState)(!1),k=_slicedToArray(j,2),l=k[0],m=k[1],n=(0,_react.useState)(a),o=_slicedToArray(n,2),p=o[0],q=o[1];return[{styles:d,placement:p,outOfBoundaries:l,arrowStyles:h},function updatePopperState(a){var b=a.styles,c=a.arrowStyles,d=a.hide,f=a.placement;return e(b),i(c),q(f),m(d),a}]},_default=function(a){var b=a.referrenceRef,c=a.popperRef,d=a.arrowRef,e=a.placement,f=void 0===e?"bottom":e,g=a.eventsEnabled,h=void 0===g||g,i=a.positionFixed,j=void 0!==i&&i,k=a.modifiers,l=void 0===k?initialMod:k,m=usePopperState(f),n=_slicedToArray(m,2),o=n[0],p=n[1],q=(0,_react.useRef)();return(0,_react.useEffect)(function(){if(q.current&&(q.current.destroy(),q.current=null),b&&b.current&&c&&c.current)// eslint-disable-next-line consistent-return
return q.current=new _popper["default"](b.current,c.current,{placement:f,positionFixed:j,modifiers:_objectSpread({},l,{arrow:_objectSpread({},l&&l.arrow,{enabled:!!d,element:d&&d.current}),applyStyle:{enabled:!1},preventOverflow:{boundariesElement:"viewport"},offset:{offset:"100%"},updateStateModifier:{enabled:!0,order:900,fn:p}})}),function(){q.current.destroy(),q.current=null}},[d&&d.current,b.current,c.current,f,j,l]),(0,_react.useEffect)(function(){q.current&&(h?q.current.enableEventListeners():q.current.disableEventListeners())},[h,q.current]),(0,_react.useEffect)(function(){q.current&&q.current.scheduleUpdate()}),o};exports["default"]=_default;