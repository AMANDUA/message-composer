"use strict";var _react=_interopRequireWildcard(require("react")),_reactDom=_interopRequireDefault(require("react-dom")),_MessageComposer=_interopRequireDefault(require("./components/MessageComposer"));require("./styles.scss");function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var a=new WeakMap;return _getRequireWildcardCache=function(){return a},a}function _interopRequireWildcard(a){if(a&&a.__esModule)return a;var b=_getRequireWildcardCache();if(b&&b.has(a))return b.get(a);var c={};if(null!=a){var d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var e in a)if(Object.prototype.hasOwnProperty.call(a,e)){var f=d?Object.getOwnPropertyDescriptor(a,e):null;f&&(f.get||f.set)?Object.defineProperty(c,e,f):c[e]=a[e]}}return c["default"]=a,b&&b.set(a,c),c}function _slicedToArray(a,b){return _arrayWithHoles(a)||_iterableToArrayLimit(a,b)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(a,b){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a)){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!(b&&c.length===b));d=!0);}catch(a){e=!0,f=a}finally{try{d||null==h["return"]||h["return"]()}finally{if(e)throw f}}return c}}function _arrayWithHoles(a){if(Array.isArray(a))return a}function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(b,!0).forEach(function(c){_defineProperty(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(b).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}for(var user,ids=1,users=[{id:"all",displayName:"All",objectType:"groupMention"},{displayName:"Philip Fry"},{displayName:"Turanga Leela"},{displayName:"Hubert Farnsworth"},{displayName:"Zapp Brannigan"},{displayName:"John Zoidberg"},{displayName:"Amy Wang"},{displayName:"Bender Rodriguez"},{displayName:"Hermes Conrad"},{displayName:"Kif Kroker"},{displayName:"Barbados Slim"},{displayName:"Bill McNeal"}],_i=0,_users=users;_i<_users.length;_i++)user=_users[_i],user.id||(user.id=ids++),user.objectType||(user.objectType="person");var mentions={filter:function filter(a){return Promise.resolve(""===a?users:users.filter(function(b){return b.displayName.toLowerCase().startsWith(a.toLowerCase())}))},renderSuggestion:function renderSuggestion(a,b){var c=b.active,d=c?{backgroundColor:"lightblue"}:null,e=_objectSpread({},d,{height:"30px",width:"200px"});return{key:a.id,render:_react["default"].createElement("div",{style:e},a.displayName)}},renderInsert:function renderInsert(a){var b="person"===a.objectType?a.displayName.split(" ")[0]:a.displayName;return _react["default"].createElement("b",{style:{background:"lightblue"}},b)},getDisplay:function getDisplay(a){return"person"===a.objectType?a.displayName.split(" ")[0]:a.displayName}},spaces=[],setValue=function(a,b){spaces[b]=a},Example=function(){var a=(0,_react.useState)(""),b=_slicedToArray(a,2),c=b[0],d=b[1],e=(0,_react.useState)(1),f=_slicedToArray(e,2),g=f[0],h=f[1],i=function(a){d(""),h(a)},j=1===g?2:1,k={id:g,value:spaces[g],save:setValue},l=(0,_react.useRef)(),m=function(a){return function(b){b.preventDefault(),l.current.emit("INSERT_TEXT",a)}},n=(0,_react.useState)(!1),o=_slicedToArray(n,2),p=o[0],q=o[1],r=(0,_react.useState)(!1),s=_slicedToArray(r,2),t=s[0],u=s[1],v=(0,_react.useState)("Write your message in this space."),w=_slicedToArray(v,2),x=w[0],y=w[1],z=(0,_react.useMemo)(function(){return{disabled:t}},[t]);return _react["default"].createElement("div",{className:"container"},_react["default"].createElement("div",{className:"content",onClick:function focus(a){a.preventDefault(),l.current.emit("FOCUS")}}),_react["default"].createElement("div",{className:"mc"},_react["default"].createElement(_MessageComposer["default"],{disabled:p,draft:k,markdown:z,mentions:mentions,send:function send(a){return d(a)},notifyKeyDown:function notifyKeyDown(a){console.log("Key pressed",a)},placeholder:x,setEmitter:function setEmitter(a){l.current=a}}),_react["default"].createElement("br",null),_react["default"].createElement("div",null,"Sending: ",JSON.stringify(c)),_react["default"].createElement("button",{onClick:function onClick(){return i(j)}},"Show Space ",j),_react["default"].createElement("button",{onClick:m("\uD83C\uDF89")},"Insert Emoji"),_react["default"].createElement("button",{onClick:m("@")},"@Mention"),_react["default"].createElement("button",{onClick:function toggleDisabled(){q(!p)}},p?"enable":"disable"),_react["default"].createElement("button",{onClick:function toggleMarkdownDisabled(){u(!t)}},t?"enable markdown":"disable markdown"),_react["default"].createElement("button",{onClick:function send(a){a.preventDefault(),l.current.emit("SEND")}},"SEND"),_react["default"].createElement("button",{onClick:function changePlaceholder(){y("This is a new placeholder")}},"Change placeholder")))};_reactDom["default"].render(_react["default"].createElement(Example,null),document.getElementById("root"));